<div class="title-box-white container">
  <app-offer-first-part></app-offer-first-part>
  <!-- Packages & Investment -->
  <section>
    <h2>Scope, Packages & Investment</h2>
    <h5 style="margin: 0.5rem">Select a service</h5>

    <div style="margin: 1.5rem">
      <div class="row row-cols-1 row-cols-md-3 g-4">
        <!-- Left: 4 sessions -->
        <div class="col">
          <div
            class="card h-100 selectable"
            [ngClass]="{ selected: selectedPackage === '4' }"
            (click)="selectPackage('4')"
          >
            <div class="card-body">
              <h3 class="card-title h5">
                Subscription-Mode - 1:1 — 4 Sessions
              </h3>
              <div
                class="d-flex justify-content-between align-items-baseline mb-2"
              >
                <span>Program Fee</span>
                <span>CHF 550</span>
              </div>
              <div
                class="d-flex justify-content-between align-items-baseline mb-2"
              >
                <span>Monthly Subscription</span>
                <span>4 x 1:1 Sessions</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Middle: 8 sessions -->
        <div class="col">
          <div
            class="card h-100 selectable"
            [ngClass]="{ selected: selectedPackage === '8' }"
            (click)="selectPackage('8')"
          >
            <div class="card-body">
              <h3 class="card-title h5">8 Sessions-Package - 1:1</h3>
              <div
                class="d-flex justify-content-between align-items-baseline mb-2"
              >
                <span>Program Fee</span>
                <span>CHF 1’150</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Right: 12 sessions -->
        <div class="col">
          <div
            class="card h-100 selectable"
            [ngClass]="{ selected: selectedPackage === '12' }"
            (click)="selectPackage('12')"
          >
            <div class="card-body">
              <h3 class="card-title h5">12 Sessions-Package - 1:1</h3>
              <div
                class="d-flex justify-content-between align-items-baseline mb-2"
              >
                <span>Program Fee</span>
                <span>CHF 2’200</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="card card-body" style="margin-top: 2rem">
        <ul>
          <li><strong>Content & exercises: Provided via Notion.</strong></li>
          <li>
            <strong
              >Lifetime access: To all program materials on Notion.</strong
            >
          </li>
          <li>
            <strong
              >Personalized coaching: Tailored to your needs and
              challenges.</strong
            >
          </li>
          <li>
            <strong
              >Active support: Mon–Fri via messages, video & voice notes
              (WhatsApp or Notion).</strong
            >
          </li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Acceptance & Payment (REVISED) -->
  <section>
    <h2>Acceptance & Payment</h2>

    <p>
      By ticking the box and completing payment, you conclude a
      <strong>binding contract</strong> with LifeFlow.Now™ (Basil Jung). The
      <a [routerLink]="['/', 'en', 'terms']" target="_blank" rel="noopener"
        >Terms & Conditions</a
      >,
      <a
        [routerLink]="['/', currentLang, 'privacy-policy']"
        target="_blank"
        rel="noopener"
        >Privacy Policy</a
      >
      and
      <a
        [routerLink]="['/', currentLang, 'impressum']"
        target="_blank"
        rel="noopener"
        >Imprint</a
      >
      <strong> form an integral part of this agreement</strong>.
    </p>
    <p>
      After purchase, you will receive a confirmation email with a copy of the
      terms. We log the acceptance (timestamp, selected package, price, and
      terms version in force at acceptance).
    </p>

    <ul>
      <li>
        <strong>Payment:</strong> Upfront before first session via Stripe
        (credit/debit card, Apple/Google Pay) or via billing. All prices are
        final. Swiss VAT (7.7%) is included if applicable.
      </li>
      <li>
        <strong>Validity:</strong> <br />Packages: Valid 6 months from purchase;
        unused sessions expire. <br />Subscriptions: renew monthly until
        cancelled. Cancel anytime before the next billing date by email to
        <a [href]="'mailto:' + providerEmail">{{ providerEmail }}</a
        >.
      </li>
      <li>
        <strong>Eligibility:</strong> You confirm you are 18+ and have legal
        capacity.
      </li>
      <li>
        <strong>Scheduling:</strong> Rescheduling ≥ 24h before session;
        otherwise the session is charged.
      </li>
      <li>
        <strong>Governing law:</strong> Swiss law applies; For EU/EEA consumers,
        any mandatory withdrawal rights remain unaffected.
      </li>
    </ul>

    <h4 style="margin: 0.5rem">Selected package</h4>
    <div class="card-body card" style="margin: 1.5rem">
      <div class="form-check">
        <input
          class="form-check-input"
          type="checkbox"
          id="acceptCheck"
          [checked]="accepted()"
          (change)="toggleAccept($event)"
          aria-describedby="acceptHelp"
        />
        <label class="form-check-label" for="acceptCheck">
          I have read and accept this Offer, the Terms &amp; Conditions, the
          Privacy Policy, and the Imprint. I confirm I am 18+ and capable of
          contracting.
        </label>
      </div>
      <small id="acceptHelp" class="form-text text-muted">
        Required before continuing.
      </small>

      @if (selectedPackage; as pkg) {
        <div class="mt-4">
          <div class="card">
            <div
              class="card-body d-flex justify-content-between align-items-center"
            >
              <div>
                <h4 class="h6 mb-1">Selected service — {{ labels[pkg] }}</h4>
                <small class="text-muted"
                  >Your transformation is on the way</small
                >
              </div>

              <a
                class="btn btn-primary"
                [class.disabled]="!accepted()"
                [attr.aria-disabled]="!accepted()"
                [attr.href]="accepted() ? stripeLinks[pkg] : null"
                target="_blank"
                rel="noopener"
                (click)="!accepted() ? $event.preventDefault() : null"
              >
                Continue to payment {{ prices[pkg] }}
              </a>
            </div>
          </div>
        </div>
      } @else {
        <i style="padding: 2rem">
          No service selected, please select one above.</i
        >
      }
    </div>
  </section>

  <!-- Provider -->
  <section>
    <h2>Provider</h2>
    <p>
      <strong>{{ providerName }}</strong
      ><br />
      {{ providerStreet }}<br />
      {{ providerZipCity }}<br />
      {{ providerCountry }}
    </p>
    <p>
      Email: <a [href]="'mailto:' + providerEmail">{{ providerEmail }}</a>
    </p>
    <p>Company/Brand: LifeFlow.Now™</p>
    <p>
      Links:
      <a [href]="termsUrl" target="_blank" rel="noopener">Terms & Conditions</a>
      ·
      <a [href]="privacyUrl" target="_blank" rel="noopener">Privacy Notice</a> ·
      <a [href]="imprintUrl" target="_blank" rel="noopener">Impressum</a>
    </p>
  </section>

  <footer>
    <p>© {{ currentYear }} LifeFlow.Now™ — All rights reserved.</p>
  </footer>

  <p>
    <a class="btn btn-primary" (click)="print()">Print / Save PDF</a>
  </p>
</div>
