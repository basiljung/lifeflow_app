<div class="quiz-container">
  @if (showLanguageBtn) {
    <div style="margin-bottom: 5rem">
      <h5>Choose the language and let's go:</h5>
      <div>
        <a
          class="btn-floating btn-large waves-effect waves-light teal"
          style="margin: 1rem"
          (click)="toggleLanguageSelfcheck('EN')"
        >
          <span style="font-weight: bold">EN</span>
        </a>
        <a
          class="btn-floating btn-large waves-effect waves-light teal"
          (click)="toggleLanguageSelfcheck('DE')"
        >
          <span style="font-weight: bold">DE</span>
        </a>
      </div>
    </div>
  }

  <div>
    @if (showQuestions) {
      <h5
        class="question-container"
        [ngStyle]="{ opacity: showLanguageBtn ? '0.5' : '1' }"
      >
        {{ questions[currentQuestionIndex].text }}
      </h5>
      @for (
        answer of questions[currentQuestionIndex].answers;
        track answer.text
      ) {
        <button
          style="cursor: pointer"
          [disabled]="showLanguageBtn"
          #btn
          (click)="selectAnswer(answer.effects); btn.blur()"
        >
          {{ answer.text }}
        </button>
      } @empty {
        <li>There are no items.</li>
      }
    }
  </div>

  @if (showResult) {
    <h4>üß†üåø Your Results:</h4>
    <p>Du hast potentiell wenig...</p>

    <div class="container">
      <ul
        class="collapsible"
        style="border-radius: 12px"
        *ngIf="resultDataSet | keyvalue as resultEntries"
      >
        <ng-container *ngFor="let entry of resultEntries">
          <li>
            <div class="collapsible-header" style="border-radius: 12px">
              <i class="material-icons">psychology</i>
              {{ entry.key | titlecase }}
              <span class="badge" style="color: #1e6f5c">
                üëâ Click for details</span
              >
            </div>
            <div class="collapsible-body">
              <h5><strong>Reason:</strong></h5>
              <ul>
                <li *ngFor="let reason of entry.value.reasons">
                  üîç {{ reason }}
                </li>
              </ul>

              <h5><strong>Tipp:</strong></h5>
              <ul>
                <li *ngFor="let tip of entry.value.tips">
                  <strong>{{ tip.title }}</strong
                  ><br />
                  {{ tip.text }}
                </li>
              </ul>
            </div>
          </li>
        </ng-container>
      </ul>
    </div>

    <p *ngIf="!(resultDataSet | keyvalue)?.length">
      Deine Leben scheint in Balance zu sein.
    </p>
  }
  <button *ngIf="currentQuestionIndex > 0" (click)="goBack()">‚¨ÖÔ∏è Zur√ºck</button>
  <p>{{ scores.clarity }}</p>
  <p>{{ scores.challenge }}</p>
  <p>{{ scores.space }}</p>
  <p>{{ scores.structure }}</p>
  <p>{{ scores.focus }}</p>
  <p>{{ scores.feasibility }}</p>
  <p>{{ scores.goal }}</p>
  <p>{{ scores.meaning }}</p>
  <p>{{ scores.oxytocin }}</p>
  <p>{{ scores.dopamine }}</p>
  <p>{{ scores.serotonin }}</p>
  <p>{{ scores.endorphins }}</p>
</div>
