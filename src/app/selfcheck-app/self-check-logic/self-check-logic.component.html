<div class="quiz-container">
  @if (showLanguageBtn) {
    <div
      class="senja-embed"
      data-id="f7400d7d-3c1e-4fd1-8a78-9e75088c9601"
      data-mode="shadow"
      data-lazyload="false"
      style="display: block; width: 100%; margin-top: 2rem; margin-bottom: 5rem"
    ></div>
    <h6
      style="margin: 2rem; margin-top: 0rem; color: #0f4f45; font-size: large"
    >
      {{
        currentLang === "en"
          ? "A quick check-in to unlock your potential, and boost your flow, balance & energy."
          : "Ein kurzer Check-in, der dir hilft, dein Potenzial zu entdecken, fÃ¼r mehr Flow, Balance und Energie."
      }}
    </h6>
    <div style="margin: 2rem">
      <h6>
        {{
          currentLang === "en"
            ? "Choose the language and
        let's go:"
            : "WÃ¤hlen Sie die Sprache und los gehtâ€˜s:"
        }}
      </h6>
      <div>
        <a
          style="margin: 1rem"
          class="btn btn-selector pulse-btn-yellow"
          (click)="toggleLanguageSelfcheck('en')"
          ><span style="font-weight: bold">EN</span></a
        >
        <a
          style="margin: 1rem"
          class="btn btn-selector pulse-btn-yellow"
          (click)="toggleLanguageSelfcheck('de')"
          ><span style="font-weight: bold">DE</span></a
        >
      </div>
    </div>
  }

  @if (showQuestions) {
    <div>
      <div
        class="question-container"
        [ngStyle]="{ opacity: showLanguageBtn ? '0.5' : '1' }"
        style="margin: 2rem; padding: 1rem"
      >
        <p style="font-style: italic">
          {{ currentQuestionIndex + 1 }} / {{ questions.length }}
        </p>
        <h5>{{ questions[currentQuestionIndex].text }}</h5>
      </div>
      @for (
        answer of questions[currentQuestionIndex].answers;
        track answer.text
      ) {
        <button
          style="cursor: pointer"
          [disabled]="showLanguageBtn"
          #btn
          (click)="selectAnswer(answer.effects); btn.blur()"
        >
          {{ answer.text }}
        </button>
      } @empty {
        <li>There are no items.</li>
      }
    </div>
  }

  @if (showResult) {
    @if (currentLangSelfCheck === "en") {
      <!-- 1. Out of Balance - Most critical -->
      <app-display-result
        [results]="resultDataSet.outOfBalance"
        [lang]="currentLangSelfCheck"
      >
        <div slot="top" class="row mt-4">
          <div class="card title-card-result">âš ï¸ Areas out of balance</div>
        </div>
        <div slot="bottom">
          <div class="row" style="margin: 0px">
            <div class="card title-card-result">
              ğŸ‘ Great job â€“ no areas out of balance!
              <span>Keep up the good work...</span>
            </div>
          </div>
          <div
            style="
              border-bottom: 1px solid #0f4f45;
              margin: 3rem auto;
              width: 20rem;
            "
          ></div>
        </div>
      </app-display-result>

      <!-- 2. Lowest Area - Needs attention -->
      <app-display-result
        [results]="resultDataSet.lowestAreaPotential"
        [lang]="currentLangSelfCheck"
      >
        <div slot="top" class="row" style="margin: 0px">
          <div class="card title-card-result">
            ğŸŒ¿ Your biggest potential for more flow â€“ worth focusing on
          </div>
        </div>
      </app-display-result>

      <!-- 3. Easy Wins - Quick improvements -->
      <app-display-result
        [results]="resultDataSet.easyWins"
        [lang]="currentLangSelfCheck"
      >
        <div slot="top" class="row" style="margin: 0px">
          <div class="card title-card-result">
            âš–ï¸ Easy wins â€“ small tweaks can make a difference here
          </div>
        </div>
      </app-display-result>

      <!-- 4. Good Flow - Doing well -->
      <app-display-result
        [results]="resultDataSet.goodFlow"
        [lang]="currentLangSelfCheck"
      >
        <div slot="top" class="row" style="margin: 0px">
          <div class="card title-card-result">
            ğŸŒŸ You're in good flow here â€“ keep it up!
          </div>
        </div>
      </app-display-result>

      <!-- 5. Top Areas - Celebrate strengths -->
      <app-display-result
        [results]="resultDataSet.topAreas"
        [lang]="currentLangSelfCheck"
      >
        <div slot="top" class="row" style="margin: 0px">
          <div class="card title-card-result">
            ğŸš€ Your strongest areas â€“ these are your superpowers!
          </div>
        </div>
      </app-display-result>

      <h6>I am very happy to receive feedback.</h6>
      <button
        onclick="window.open('https://feedback.lifeflow.now', '_blank')"
        style="cursor: pointer"
      >
        ğŸ’¡ Feedback
      </button>
      <br />
    } @else {
      <!-- German version -->
      <app-display-result
        [results]="resultDataSet.outOfBalance"
        [lang]="currentLangSelfCheck"
      >
        <div slot="top" class="row mt-4">
          <div class="card title-card-result">
            âš ï¸ Bereiche aus dem Gleichgewicht
          </div>
        </div>
        <div slot="bottom">
          <div class="row" style="margin: 0px">
            <div class="card title-card-result">
              ğŸ‘ Sehr gut â€“ keine Bereiche aus dem Gleichgewicht!
              <span>Mach weiter so...</span>
            </div>
          </div>
          <div
            style="
              border-bottom: 1px solid #0f4f45;
              margin: 3rem auto;
              width: 20rem;
            "
          ></div>
        </div>
      </app-display-result>

      <app-display-result
        [results]="resultDataSet.lowestAreaPotential"
        [lang]="currentLangSelfCheck"
      >
        <div slot="top" class="row" style="margin: 0px">
          <div class="card title-card-result">
            ğŸŒ¿ Dein grÃ¶ÃŸtes Potenzial fÃ¼r mehr Flow â€“ lohnt sich zu fokussieren
          </div>
        </div>
      </app-display-result>

      <app-display-result
        [results]="resultDataSet.easyWins"
        [lang]="currentLangSelfCheck"
      >
        <div slot="top" class="row" style="margin: 0px">
          <div class="card title-card-result">
            âš–ï¸ Schnelle Erfolge â€“ kleine Anpassungen kÃ¶nnen hier viel bewirken
          </div>
        </div>
      </app-display-result>

      <app-display-result
        [results]="resultDataSet.goodFlow"
        [lang]="currentLangSelfCheck"
      >
        <div slot="top" class="row" style="margin: 0px">
          <div class="card title-card-result">
            ğŸŒŸ Du bist gut im Flow hier â€“ mach weiter so!
          </div>
        </div>
      </app-display-result>

      <app-display-result
        [results]="resultDataSet.topAreas"
        [lang]="currentLangSelfCheck"
      >
        <div slot="top" class="row" style="margin: 0px">
          <div class="card title-card-result">
            ğŸš€ Deine stÃ¤rksten Bereiche â€“ das sind deine SuperkrÃ¤fte!
          </div>
        </div>
      </app-display-result>

      <h6>Ich freue mich Ã¼ber dein Feedback.</h6>
      <button
        onclick="window.open('https://forms.gle/zLWnFkRnFZtoCNEY6', '_blank')"
        style="cursor: pointer"
      >
        ğŸ’¡ Feedback
      </button>
      <br />
    }
    <div
      style="border-bottom: 1px solid #0f4f45; margin: 1rem auto; width: 20rem"
    ></div>

    <a
      class="btn pulse-btn-yellow"
      style="border-radius: 12px; margin-top: 2rem; margin-bottom: 4rem"
    >
      <app-cta-email-course></app-cta-email-course>
    </a>
  } @else {
    <button
      style="cursor: pointer; margin: 3rem"
      *ngIf="currentQuestionIndex > 0"
      (click)="goBack()"
    >
      {{ currentLang === "en" ? "â¬…ï¸ Back" : "â¬…ï¸ ZurÃ¼ck" }}
    </button>
  }
</div>
